{{- /* Main WeeChat launch function */ -}}
function wc --description "Launch WeeChat IRC client (weechat-connect)"
    # Ultra-Zen: Modern IRC communication gateway

    # Check if weechat is installed
    if not command -q weechat
        echo "WeeChat is not installed. Run 'chezmoi apply' to install it."
        return 1
    end

    # Create Downloads directory if it doesn't exist
    mkdir -p ~/Downloads

    # Launch weechat with proper environment
    set -x TERM "xterm-256color"

    # Show quick help on first launch
    if not test -d ~/.config/weechat
        echo "Welcome to WeeChat! Quick reference:"
        echo "  Alt+h/l     - Previous/next buffer"
        echo "  Alt+1-9     - Switch to buffer 1-9"
        echo "  Alt+d       - DCC transfers window"
        echo "  /help       - Show help"
        echo "  /quit       - Exit WeeChat"
        echo ""
        echo "DCC auto-accept is enabled for files up to 10MB"
        echo "Downloads will be saved to ~/Downloads"
        echo ""
        sleep 2
    end

    weechat $argv
end