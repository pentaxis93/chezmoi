{{- /* Remove completed torrents from transmission */ -}}
function tclean --description "Remove completed torrents"
    if not systemctl --user is-active --quiet transmission-daemon
        echo "⚠ Transmission daemon not running"
        return 1
    end

    # Get list of completed torrents (100% done)
    set completed_ids (transmission-remote -n (transmission-auth) -l | grep "100%" | awk '{print $1}' | grep -v "*")

    if test -z "$completed_ids"
        echo "No completed torrents to remove"
        return 0
    end

    set count (count $completed_ids)

    # Remove each completed torrent
    for id in $completed_ids
        transmission-remote -n (transmission-auth) -t $id --remove >/dev/null 2>&1
    end

    set_color green
    echo "✓ Removed $count completed torrent(s)"
    set_color normal
end