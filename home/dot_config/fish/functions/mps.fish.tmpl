function mps --description "Show mpv watch history status (mps = media-play-status)"
    set -l history_file ~/.local/state/mpv/watch_history.jsonl
    set -l watch_later ~/.local/state/mpv/watch_later

    echo "MPV Status:"
    echo "==========="

    # Check watch history
    if test -f $history_file
        set -l count (wc -l < $history_file)
        echo "Watch history: $count entries"
        echo ""
        echo "Recent plays (last 5):"
        tail -5 $history_file | jq -r '.["file-local-options"].title // .path' 2>/dev/null || tail -5 $history_file
    else
        echo "No watch history found"
    end

    echo ""

    # Check saved positions
    if test -d $watch_later
        set -l saved (count $watch_later/*)
        if test $saved -gt 0
            echo "Saved positions: $saved files"
            echo ""
            echo "Files with saved positions:"
            for file in $watch_later/*
                echo "  - "(basename $file)
            end
        else
            echo "No saved positions"
        end
    else
        echo "No saved positions directory"
    end
end

# Register semantic abbreviation
abbr --add mps mps