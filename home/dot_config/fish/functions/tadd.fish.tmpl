{{- /* Add torrent to transmission */ -}}
function tadd --description "Add torrent file or magnet link"
    if test (count $argv) -eq 0
        echo "Usage: tadd <torrent-file-or-magnet-link>"
        return 1
    end

    # Check if daemon is running
    if not systemctl --user is-active --quiet transmission-daemon
        echo "⚠ Transmission daemon not running. Starting..."
        tstart
    end

    # Add the torrent
    transmission-remote -n (transmission-auth) -a "$argv[1]"

    if test $status -eq 0
        set_color green
        echo "✓ Torrent added successfully"
        set_color normal

        # Show list after adding
        sleep 1
        tlist
    else
        set_color red
        echo "✗ Failed to add torrent"
        set_color normal
        return 1
    end
end